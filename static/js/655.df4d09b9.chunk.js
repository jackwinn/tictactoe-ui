"use strict";(self.webpackChunktictactoe_ui=self.webpackChunktictactoe_ui||[]).push([[655],{655:(e,t,n)=>{n.r(t),n.d(t,{default:()=>d});var r=n(43),s=n(579);const i=(0,s.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("g",{id:"SVGRepo_bgCarrier","stroke-width":"0"}),(0,s.jsx)("g",{id:"SVGRepo_tracerCarrier","stroke-linecap":"round","stroke-linejoin":"round"}),(0,s.jsx)("g",{id:"SVGRepo_iconCarrier",children:(0,s.jsx)("path",{d:"M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z",stroke:"#ffffff","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})})]}),a=(0,s.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("g",{id:"SVGRepo_bgCarrier","stroke-width":"0"}),(0,s.jsx)("g",{id:"SVGRepo_tracerCarrier","stroke-linecap":"round","stroke-linejoin":"round"}),(0,s.jsx)("g",{id:"SVGRepo_iconCarrier",children:(0,s.jsx)("path",{d:"M19 5L5 19M5.00001 5L19 19",stroke:"#fff","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})})]}),o=e=>{let{gameState:t,setGameState:n,socket:o,playingAs:l,currentElement:c,finishedArrayState:d,setFinishedState:u,finishedState:h,id:p,currentPlayer:f,setCurrentPlayer:m}=e;const[g,v]=(0,r.useState)(null);return(0,s.jsx)("div",{onClick:()=>{if(l===f&&!h&&!g){v("circle"===f?i:a);const e=f;o.emit("playerMoveFromClient",{state:{id:p,sign:e}}),m("circle"===f?"cross":"circle"),n((t=>{let n=[...t];const r=Math.floor(p/3),s=p%3;return n[r][s]=e,n}))}},className:`square ${h?"not-allowed":""}\n      ${f!==l?"not-allowed":""}\n       ${d.includes(p)?h+"-won":""}\n       ${h&&h!==l?"grey-background":""}\n       `,children:"circle"===c?i:"cross"===c?a:g})};var l=n(104);const c=[[1,2,3],[4,5,6],[7,8,9]],d=()=>{const e=localStorage.getItem("user"),t=e?JSON.parse(e):null,[n,i]=(0,r.useState)(c),[a,d]=(0,r.useState)("circle"),[u,h]=(0,r.useState)(!1),[p,f]=(0,r.useState)([]),[m,g]=(0,r.useState)(!1),[v,j]=(0,r.useState)(null),[x,w]=(0,r.useState)(""),[S,k]=(0,r.useState)(null),[y,C]=(0,r.useState)(null);return(0,r.useEffect)((()=>{const e=(()=>{for(let e=0;e<n.length;e++)if(n[e][0]===n[e][1]&&n[e][1]===n[e][2])return f([3*e+0,3*e+1,3*e+2]),n[e][0];for(let e=0;e<n.length;e++)if(n[0][e]===n[1][e]&&n[1][e]===n[2][e])return f([0+e,3+e,6+e]),n[0][e];return n[0][0]===n[1][1]&&n[1][1]===n[2][2]?n[0][0]:n[0][2]===n[1][1]&&n[1][1]===n[2][0]?n[0][2]:n.flat().every((e=>{if("circle"===e||"cross"===e)return!0}))?"draw":null})();e&&h(e)}),[n]),null===v||void 0===v||v.on("opponentLeftMatch",(()=>{h("opponentLeftMatch")})),null===v||void 0===v||v.on("playerMoveFromServer",(e=>{const t=e.state.id;i((n=>{let r=[...n];const s=Math.floor(t/3),i=t%3;return r[s][i]=e.state.sign,r})),d("circle"===e.state.sign?"cross":"circle")})),null===v||void 0===v||v.on("connect",(function(){g(!0)})),null===v||void 0===v||v.on("OpponentNotFound",(function(){k(!1)})),null===v||void 0===v||v.on("OpponentFound",(function(e){C(e.playingAs),k(e.opponentName)})),m?m&&!S?(0,s.jsx)("div",{className:"waiting",children:(0,s.jsx)("p",{children:"Waiting for opponent"})}):(0,s.jsxs)("div",{className:"main-div",children:[(0,s.jsxs)("div",{className:"move-detection",children:[(0,s.jsx)("div",{className:"left "+(a===y?"current-move-"+a:""),children:x}),(0,s.jsx)("div",{className:"right "+(a!==y?"current-move-"+a:""),children:S})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"game-heading water-background",children:"Tic Tac Toe"}),(0,s.jsx)("div",{className:"square-wrapper",children:n.map(((e,t)=>e.map(((e,r)=>(0,s.jsx)(o,{socket:v,playingAs:y,gameState:n,finishedArrayState:p,finishedState:u,currentPlayer:a,setCurrentPlayer:d,setGameState:i,id:3*t+r,currentElement:e},3*t+r)))))}),u&&"opponentLeftMatch"!==u&&"draw"!==u&&(0,s.jsxs)("h3",{className:"finished-state",children:[u===y?"You ":u," won the game"]}),u&&"opponentLeftMatch"!==u&&"draw"===u&&(0,s.jsx)("h3",{className:"finished-state",children:"It's a Draw"})]}),!u&&S&&(0,s.jsxs)("h2",{children:["You are playing against ",S]}),u&&"opponentLeftMatch"===u&&(0,s.jsx)("h2",{children:"You won the match, Opponent has left"})]}):(0,s.jsx)("div",{className:"main-div",children:(0,s.jsx)("button",{onClick:async function(){const e=t.username;w(e);const n=(0,l.io)("http://localhost:4001",{autoConnect:!0});null===n||void 0===n||n.emit("request_to_play",{playerName:e}),j(n)},className:"playOnline",children:"Play Online"})})}}}]);
//# sourceMappingURL=655.df4d09b9.chunk.js.map